<%- include('layouts/header', { session: session }); -%>
<%- include('layouts/navigation', { session: session }); -%>

<h1>Manage Posts</h1>
<a href="/admin/posts/new" class="create-new-post">Create New Post</a>

<ul class="post-list">
    <% posts.forEach(post => { %>
        <li class="post-item">
            <span class="post-title"><h2><%= post.title %></h2></span>
            <div class="post-actions">
                <a href="/admin/posts/<%= post._id %>/edit" class="edit-btn">Edit</a>
                <form action="/admin/posts/<%= post._id %>?_method=DELETE" method="POST" class="delete-form" onsubmit="return confirmDelete()">
                    <button type="submit" class="delete-btn">Delete</button>
                </form>
            </div>
        </li>
    <% }) %>
</ul>

<%- include('layouts/footer'); -%>

<script>
    function confirmDelete() {
        return confirm('Are you sure you want to delete this post?');
    }
</script>
